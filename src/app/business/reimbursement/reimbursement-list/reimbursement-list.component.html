<section class="panel">
  <div class="panel-body bio-graph-info">
    <h1>
      <i class="fa fa-search fa-1x fa-fw"></i>查询
    </h1>
    <div class="row">
      <form class="form-inline" role="form" id="searchForm">
        <div class="form-group">
          <input name="name" class="form-control" id="name" placeholder="名称" [(ngModel)]="params.name">
        </div>
        <div class="form-group">
          <input name="description" class="form-control" id="description" placeholder="备注" [(ngModel)]="params.name">
        </div>
        <button type="submit" (click)="query()" class="btn btn-success">查询</button>
      </form>
    </div>
  </div>
</section>

<section>
  <div class="row">
    <div class="col-lg-12">
      <div class="panel with-nav-tabs panel-primary panel-square panel-no-border">
        <div>
          <tabset>
            <tab>
              <ng-template tabHeading>
                <i class="fa fa-home">&nbsp;报销申请列表</i>
              </ng-template>
              <div class="panel-body-min">
                <div class="tab-content">
                  <div class="panel-body-min no-padding">
                    <table class="table no-margin">
                      <thead>
                      <tr>
                        <th>描述</th>
                        <th>金额</th>
                        <th>状态</th>
                        <th class="col-md-2">操作</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let item of reimbursements">
                        <td>{{item.description}}</td>
                        <td>{{item.amount}}</td>
                        <td>
                          <span *ngIf="item.status == '1'">
                            <i class="fa fa-check"></i>
                          </span>
                          <span *ngIf="item.status == '0'">
                            <i class="fa fa-lock"></i>
                          </span>
                        </td>
                        <td class="actions-hover actions-fade">
                          <span class="label label-primary label-mini" tooltip="编辑报销申请" placement="left">
                            <a class="operation-links a-white" (click)='edit({"id": item.id})'><i
                              class="fa fa-pencil fa-fw"></i></a>
                          </span>
                          <span class="label label-danger label-mini" tooltip="删除报销申请" placement="top">
                          <a class="delete-row operation-links a-white" (click)="delete(template, item.id, item.desc)">
                            <i class="fa fa-trash-o fa-fw"></i></a>
                          </span>
                          <span class="label label-info label-mini" tooltip="点击发起流程" placement="right">
                          <a class="delete-row operation-links a-white" (click)="newWorkFlowInstance(workFlowTemplate, item.id, item.desc)">
                            <i class="fa fa-rocket fa-fw"></i></a>
                          </span>
                        </td>
                      </tr>
                      <tr class="text-center" *ngIf="!roles">
                        <td colspan="4">
                          <p class="error-tip-color">暂无数据</p>
                        </td>
                      </tr>
                      </tbody>
                    </table>

                    <ng-template #template>
                      <div class="modal-body text-center">
                        <p>你确定要删除 <b>{{preDelete.name}}</b> 吗？</p>
                        <button type="button" class="btn btn-primary" (click)="confirm()">是</button>
                        <button type="button" class="btn btn-default" (click)="decline()">否</button>
                      </div>
                    </ng-template>

                    <ng-template #workFlowTemplate>
                      <div class="modal-body text-center">
                        <h2>sqwdd</h2>
                        <br/>
                        <button type="button" class="btn btn-primary" (click)="menusConfirm()">保存</button>
                        <button type="button" class="btn btn-default" (click)="decline()">取消</button>
                      </div>
                    </ng-template>
                  </div>
                </div>
                <div style="text-align: center">
                  <pagination
                    [totalItems]="paginationParams.totalCount"
                    [nextText]="paginationParams.nextText"
                    [previousText]="paginationParams.previousText"
                    [(ngModel)]="paginationParams.currentPage"
                    (pageChanged)="pageChanged($event)"></pagination>
                </div>
              </div>
            </tab>
            <tab (click)="add()">
              <div (click)="add()">
                <ng-template tabHeading>
                  <a (click)="add()"><i class=" fa fa-bars">&nbsp;新建</i></a>
                </ng-template>
              </div>
            </tab>
          </tabset>
        </div>
      </div>
    </div>
  </div>
</section>
